<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoVision - AI bot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(to bottom, #000000, #05050A);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 1rem;
            box-sizing: border-box;
            color: #E2E8F0;
            position: relative;
            padding-bottom: 4.5rem;
        }
        .container {
            background-color: #0A0A14;
            border-radius: 1.5rem;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.6);
            padding: 1.5rem;
            width: 100%;
            max-width: 500px;
            box-sizing: border-box;
            min-height: 70vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .page {
            display: none;
            flex-grow: 1;
            padding-top: 1rem;
            padding-bottom: 1rem;
            animation: fadeIn 0.5s ease-out;
        }
        .page.active {
            display: flex;
            flex-direction: column;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn-primary {
            background-image: linear-gradient(to right, #4B0082 0%, #8A2BE2 100%);
            color: white;
            padding: 0.85rem 1.75rem;
            border-radius: 2rem;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(138, 43, 226, 0.4);
            cursor: pointer;
            border: none;
            outline: none;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .btn-primary:hover {
            opacity: 0.95;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(138, 43, 226, 0.6);
        }
        .btn-secondary {
            background-color: #1A1A2E;
            color: #E2E8F0;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            outline: none;
        }
        .btn-secondary:hover {
            background-color: #2A2A3A;
        }
        .loading-spinner {
            border: 4px solid #3A3A4A;
            border-top: 4px solid #00FFFF;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 1rem auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .card {
            background-color: #0F0F1A;
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            padding: 1.5rem;
            margin-top: 1rem;
            border: none;
        }
        .analysis-item span:first-child {
            font-weight: 600;
            color: #00FFFF;
        }
        .image-upload-area {
            background-color: #0F0F1A;
            border-radius: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
            min-height: 150px;
            width: 100%;
            max-width: 200px;
            margin: 0 auto 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #1A1A2E;
        }
        .image-upload-area:hover {
            background-color: #1A1A2E;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
        }
        .upload-icon-img {
            width: 60px;
            height: 60px;
            margin-bottom: 0.5rem;
            filter: drop-shadow(0 0 5px #00FFFF) drop-shadow(0 0 5px #6A00FF);
        }
        .image-preview {
            max-width: 100%;
            border-radius: 0.5rem;
            margin-top: 1rem;
            display: none;
            border: 1px solid #2A2A3A;
        }
        .image-upload-area-content p {
            text-align: center;
        }
        .subscription-plan {
            background-color: #0F0F1A;
            border: 1px solid #2A2A3A;
            border-radius: 0.75rem;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .subscription-plan h3 {
            font-weight: 700;
            color: #E2E8F0;
            margin-bottom: 0.5rem;
        }
        .subscription-plan p {
            color: #CBD5E1;
            font-size: 0.9rem;
        }
        .payment-info {
            text-align: center;
            padding: 1rem;
            color: #CBD5E1;
        }
        .payment-info img {
            max-width: 80px;
            margin: 0 auto 1rem;
        }
        .text-green-600 { color: #00FF00; }
        .text-red-600 { color: #FF0000; }
        .text-blue-600 { color: #00FFFF; }

        .analysis-section-card {
            background-color: #0F0F1A;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .analysis-section-card h2 {
            font-size: 1.25rem;
            font-weight: 700;
            color: #E2E8F0;
            margin-bottom: 1rem;
            text-align: center;
        }
        .key-insight-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        .insight-item {
            background-color: #1A1A2E;
            border-radius: 0.75rem;
            padding: 0.75rem 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            color: #CBD5E1;
            font-size: 0.9rem;
        }
        .insight-item .icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #00FFFF;
        }
        .insight-item .value {
            font-weight: 600;
            color: #E2E8F0;
            margin-top: 0.25rem;
        }
        .game-plan-text {
            color: #CBD5E1;
            line-height: 1.6;
            font-size: 0.95rem;
        }
        .collapsible-section {
            background-color: #0F0F1A;
            border-radius: 1rem;
            margin-bottom: 1rem;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .collapsible-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            color: #E2E8F0;
            cursor: pointer;
            background-color: #1A1A2E;
            border-bottom: 1px solid #0F0F1A;
            transition: background-color 0.3s ease;
        }
        .collapsible-header:hover {
            background-color: #2A2A3A;
        }
        .collapsible-header .arrow-icon {
            transition: transform 0.3s ease;
        }
        .collapsible-header.active .arrow-icon {
            transform: rotate(90deg);
        }
        .collapsible-content {
            padding: 0 1.5rem;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding 0.5s ease-out;
            color: #CBD5E1;
            line-height: 1.6;
            font-size: 0.95rem;
        }
        .collapsible-content.active {
            max-height: 500px;
            padding: 1.5rem;
        }
        .detailed-analysis-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .detailed-analysis-list li {
            background-color: #1A1A2E;
            border-radius: 0.75rem;
            padding: 1rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 0.95rem;
            color: #E2E8F0;
        }
        .detailed-analysis-list li .number {
            background-color: #4B0082;
            color: white;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            margin-right: 0.75rem;
            flex-shrink: 0;
        }
        .detailed-analysis-list li .lock-icon {
            margin-left: 0.75rem;
            color: #9CA3AF;
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        .detailed-analysis-list li .text-content {
            flex-grow: 1;
        }
        .feature-item {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
            color: #CBD5E1;
            font-size: 1rem;
        }
        .feature-item .icon {
            font-size: 1.2rem;
            margin-right: 0.75rem;
        }
        .feature-item.available .icon {
            color: #00FF00;
        }
        .feature-item.unavailable {
            color: #718096;
        }
        .feature-item.unavailable .icon {
            color: #FF0000;
        }
        .locked-content {
            filter: blur(2px);
            pointer-events: none;
            user-select: none;
        }
        .lock-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            border-radius: 1rem;
            z-index: 10;
        }
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #05050F;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 0.25rem 0;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.5);
            border-top-left-radius: 1rem;
            border-top-right-radius: 1rem;
            z-index: 100;
            height: 4.5rem;
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #CBD5E1;
            font-size: 0.65rem;
            font-weight: 500;
            padding: 0.25rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .nav-item.active {
            color: #00FFFF;
        }
        .nav-item:hover {
            color: #00FFFF;
        }
        .nav-item .nav-icon-circle {
            background-color: #1A1A2E;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.15rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }
        .nav-item.active .nav-icon-circle {
            background-image: linear-gradient(to right, #4B0082 0%, #8A2BE2 100%);
            box-shadow: 0 2px 10px rgba(138, 43, 226, 0.5);
        }
        .nav-item .nav-icon {
            font-size: 1.3rem;
            color: #E2E8F0;
            transition: color 0.3s ease;
        }
        .nav-item.active .nav-icon {
            color: white;
        }
        .loading-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .loading-modal.active {
            opacity: 1;
            visibility: visible;
        }
        .loading-modal-content {
            background-color: #0F0F1A;
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
            transform: scale(0.8);
            opacity: 0;
            animation: scaleIn 0.3s forwards;
        }
        @keyframes scaleIn {
            to { transform: scale(1); opacity: 1; }
        }
        .loading-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: #00FFFF;
            margin-top: 1rem;
        }
        .loading-spinner-modal {
            border: 6px solid #3A3A4A;
            border-top: 6px solid #00FFFF;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
        }
        .token-counter {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background-color: #0F0F1A;
            padding: 0.5rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.85rem;
            font-weight: 600;
            color: #4B0082;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        .subscription-options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        .subscription-option-card {
            background-color: #1A1A2E;
            border-radius: 0.75rem;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
        }
        .subscription-option-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.3);
        }
        .subscription-option-card h4 {
            font-size: 1.1rem;
            font-weight: 700;
            color: #E2E8F0;
            margin-bottom: 0.5rem;
        }
        .subscription-option-card p {
            color: #CBD5E1;
            font-size: 0.9rem;
        }
        .subscription-option-card .price {
            font-size: 1.2rem;
            font-weight: 700;
            color: #00FFFF;
            margin-top: 0.75rem;
        }
        .subscription-option-card .credits {
            font-size: 0.8rem;
            color: #9CA3AF;
        }
        .toggle-switch {
            display: flex;
            background-color: #1A1A2E;
            border-radius: 1.5rem;
            padding: 0.1rem;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
            width: 140px;
            flex-shrink: 0;
        }
        .toggle-button {
            flex: 1;
            padding: 0.2rem 0.5rem;
            border-radius: 1.5rem;
            font-size: 0.7rem;
            font-weight: 600;
            color: #9CA3AF;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .toggle-button.active {
            background-image: linear-gradient(to right, #4B0082 0%, #8A2BE2 100%);
            color: white;
            box-shadow: 0 1px 5px rgba(138, 43, 226, 0.4);
        }
        .toggle-button .save-badge {
            background-color: #FF00FF;
            color: white;
            font-size: 0.6rem;
            padding: 0.05rem 0.3rem;
            border-radius: 0.5rem;
            margin-left: 0.3rem;
            font-weight: 700;
        }
        .credit-select-box {
            background-color: #2A2A3A;
            border: 1px solid #3A3A4A;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            color: #E2E8F0;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            width: 100%;
            margin-top: 0.5rem;
            background-image: url('data:image/svg+xml;utf8,<svg fill="%23E2E8F0" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.5em;
            cursor: pointer;
        }
        .credit-select-box option {
            background-color: #2A2A3A;
            color: #E2E8F0;
        }

        .subscription-options-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        @media (min-width: 640px) {
            .subscription-options-container {
                flex-direction: row;
            }
            .subscription-options-container .card {
                flex: 1;
                margin-top: 0;
            }
        }
        .subscription-header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        .subscription-header-row h3 {
            margin-bottom: 0;
            text-align: center;
            flex-grow: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-2xl font-bold text-center mb-6">CryptoVision - AI –±–æ—Ç</h1>

        <div class="token-counter" id="tokenCounter">
            –¢–æ–∫–µ–Ω–æ–≤: 100
        </div>

        <div id="analysisPage" class="page active">
            <div class="analysis-section-card mb-4">
                <label for="chartImageUpload" class="block text-sm font-medium mb-2 text-gray-300 text-center">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞:</label>
                <div class="image-upload-area" id="imageUploadArea">
                    <input type="file" id="chartImageUpload" accept="image/*" class="hidden">
                    <div class="image-upload-area-content">
                        <!-- –í—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à —Ç–µ–≥ <img> —Å—é–¥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä: -->
                        <!-- <img src="–≤–∞—à–∞_—Å—Å—ã–ª–∫–∞_–Ω–∞_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.png" alt="–ò–∫–æ–Ω–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≥—Ä–∞—Ñ–∏–∫–∞" class="upload-icon-img"> -->
                        <img id="imagePreview" class="image-preview mx-auto" src="#" alt="–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –≥—Ä–∞—Ñ–∏–∫–∞">
                    </div>
                </div>
            </div>

            <button id="getAnalysisBtn" class="btn-primary w-full flex items-center justify-center mb-6">
                <span id="buttonText">–ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑</span>
                <div id="loadingSpinner" class="loading-spinner hidden ml-3"></div>
            </button>

            <div id="analysisResult" class="hidden">
                <div class="analysis-section-card">
                    <h2>–ö–ª—é—á–µ–≤—ã–µ –ò–Ω—Å–∞–π—Ç—ã</h2>
                    <div class="key-insight-grid mb-4">
                        <div class="insight-item">
                            <span class="icon">üìà</span>
                            <span>–¢—Ä–µ–Ω–¥</span>
                            <span class="value" id="outputTrend">–ë—ã—á–∏–π</span>
                        </div>
                        <div class="insight-item">
                            <span class="icon">üìä</span>
                            <span>–í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å</span>
                            <span class="value" id="outputVolatility">–°—Ä–µ–¥–Ω—è—è</span>
                        </div>
                        <div class="insight-item">
                            <span>–û–±—ä–µ–º</span>
                            <span class="value" id="outputVolume">–í—ã—Å–æ–∫–∏–π</span>
                        </div>
                        <div class="insight-item">
                            <span>–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ä—ã–Ω–∫–∞</span>
                            <span class="value" id="outputSentiment">–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ</span>
                        </div>
                    </div>
                    <div class="space-y-2 text-gray-300">
                        <p class="analysis-item"><span class="text-blue-600">–î–µ–π—Å—Ç–≤–∏–µ:</span> <span id="outputAction" class="font-bold"></span></p>
                        <p class="analysis-item"><span class="text-blue-600">–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞:</span> <span id="outputEntryPrice"></span></p>
                        <p class="analysis-item"><span class="text-blue-600">–¶–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞:</span> <span id="outputTargetPrice"></span></p>
                        <p class="analysis-item"><span class="text-blue-600">–°—Ç–æ–ø-–ª–æ—Å—Å:</span> <span id="outputStopLoss"></span></p>
                        <p class="analysis-item"><span class="text-blue-600">–¢–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç:</span> <span id="outputTakeProfit"></span></p>
                    </div>
                </div>

                <div class="analysis-section-card">
                    <h2>–ü–ª–∞–Ω –î–µ–π—Å—Ç–≤–∏–π</h2>
                    <p class="game-plan-text" id="outputGamePlan">
                        –ë–∏—Ç–∫–æ–π–Ω –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è —Ç–æ—Ä–≥—É–µ—Ç—Å—è –æ–∫–æ–ª–æ $98,218 –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–∏–ª—å–Ω—ã–π –±—ã—á–∏–π –∏–º–ø—É–ª—å—Å —Å –≤—ã—Å–æ–∫–∏–º –æ–±—ä–µ–º–æ–º, —á—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ä–∞—Å—Ç—É—â–∏–π –∏–Ω—Ç–µ—Ä–µ—Å. –ú–æ–π —Ç–æ—Ä–≥–æ–≤—ã–π –ø–ª–∞–Ω —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ–±—ã –≤–æ–π—Ç–∏ –≤ –¥–ª–∏–Ω–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –æ–∫–æ–ª–æ $97,500, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–æ–ø-–ª–æ—Å—Å —á—É—Ç—å –Ω–∏–∂–µ –Ω–µ–¥–∞–≤–Ω–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ $95,000 –∏ —Å—Ç—Ä–µ–º–∏—Ç—å—Å—è –∫ —Ü–µ–ª–∏ –≤ $105,000, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–º —É—Ä–æ–≤–Ω—è–º —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è. (–¥–µ–º–æ)
                    </p>
                </div>

                <div class="collapsible-section">
                    <div class="collapsible-header" onclick="toggleCollapsible(this, 'technicalAnalysisContent')">
                        <span>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑</span>
                        <span class="arrow-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" id="technicalAnalysisContent">
                        <p class="font-bold text-lg mb-2">RSI: 71</p>
                        <p>–ü—Ä–µ–≤—ã—à–∞–µ—Ç 70 ‚Äì –∑–æ–Ω–∞ –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç–∏, –Ω–æ –¥–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.</p>
                        <p class="font-bold text-lg mt-4 mb-2">MACD: –ë—ã—á—å–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ</p>
                        <p>–õ–∏–Ω–∏–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞—Å—Ö–æ–¥–∏—Ç—å—Å—è –≤–≤–µ—Ä—Ö ‚Äì —Ç—Ä–µ–Ω–¥ —É—Å–∏–ª–∏–≤–∞–µ—Ç—Å—è.</p>
                        <p>EMA20: –¶–µ–Ω–∞ –≤—ã—à–µ EMA</p>
                        <p>–î–Ω–µ–≤–Ω–∞—è —Å–≤–µ—á–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ –∑–∞–∫—Ä–µ–ø–∏–ª–∞—Å—å –≤—ã—à–µ ‚Äì –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–π –≤–æ—Å—Ö–æ–¥—è—â–∏–π –∏–º–ø—É–ª—å—Å.</p>
                        <p class="font-bold text-lg mt-4 mb-2">Bollinger Bands: –†–∞—Å—à–∏—Ä—è—é—Ç—Å—è –≤–≤–µ—Ä—Ö</p>
                        <p>–¶–µ–Ω–∞ —É –≤–µ—Ä—Ö–Ω–µ–π –ø–æ–ª–æ—Å—ã, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–∏–ª—å–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è –≤–≤–µ—Ä—Ö.</p>
                        <p class="font-bold text-lg mt-4 mb-2">Ichimoku: –¶–µ–Ω–∞ –Ω–∞–¥ –æ–±–ª–∞–∫–æ–º, Chikou –≤—ã—à–µ —Ü–µ–Ω—ã</p>
                        <p>–í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –±—ã—á—å–µ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏ ‚Äì –º–æ—â–Ω—ã–π –∞–ø-—Ç—Ä–µ–Ω–¥.</p>
                        <p class="font-bold text-lg mt-4 mb-2">Volume: –û–±—ä—ë–º—ã —Ä–∞—Å—Ç—É—Ç –Ω–∞ —Ä–æ—Å—Ç–µ</p>
                        <p>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–ø—Ä–æ—Å–∞ ‚Äì –∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π.</p>
                        <p class="font-bold text-lg mt-4 mb-2">ADX: 36</p>
                        <p>–°–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥ ‚Äì —É–∫—Ä–µ–ø–ª—è–µ—Ç—Å—è.</p>
                        <p class="font-bold text-lg mt-4 mb-2">Stochastic: 83</p>
                        <p>–í –∑–æ–Ω–µ –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç–∏, –Ω–æ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ –ø–æ–∫–∞ –Ω–µ –Ω–∞–±–ª—é–¥–∞–µ—Ç—Å—è.</p>
                    </div>
                </div>

                <div class="collapsible-section">
                    <div class="collapsible-header" onclick="toggleCollapsible(this, 'newsAnalysisContent')">
                        <span>–ù–æ–≤–æ—Å—Ç–Ω–æ–π –∞–Ω–∞–ª–∏–∑</span>
                        <span class="arrow-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" id="newsAnalysisContent">
                        <p class="font-bold text-lg mb-2">–ù–æ–≤–æ—Å—Ç–Ω–æ–π –∞–Ω–∞–ª–∏–∑ –∑–∞ 14 –¥–Ω–µ–π (–Ω–∞ 07/2025)</p>
                        <p>–ù–∞–±–ª—é–¥–∞–µ—Ç—Å—è –Ω–∞—Ä–∞—Å—Ç–∞—é—â–∏–π –æ–ø—Ç–∏–º–∏–∑–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ Bitcoin, —á—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –Ω–æ–≤–æ—Å—Ç–µ–π –æ–± –æ–∂–∏–¥–∞–µ–º–æ–º —Ä–æ—Å—Ç–µ –µ–≥–æ —Ü–µ–Ω—ã –∏ –ø—Ä–æ–±–æ—è—Ö –≤ –∫–ª—é—á–µ–≤—ã—Ö —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —É—Ä–æ–≤–Ω—è—Ö. –ê–Ω–∞–ª–∏–∑ –≥–æ–≤–æ—Ä–∏—Ç –æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –Ω–æ–≤—ã—Ö –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –º–∞–∫—Å–∏–º—É–º–∞—Ö, —á—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —Å—Ä–µ–¥–∏ —Ç—Ä–µ–π–¥–µ—Ä–æ–≤. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞, —Ç–∞–∫–∏–µ –∫–∞–∫ 'Bollinger Bands', —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫—Ä—É–ø–Ω—ã—Ö –¥–≤–∏–∂–µ–Ω–∏–π –≤–≤–µ—Ä—Ö. –î–∞–Ω–Ω—ã–µ –æ —Ä–æ—Å—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ Bitcoin –∏ –Ω–∞—Ä–∞—â–∏–≤–∞–Ω–∏–∏ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ —Ç–∞–∫–∂–µ –¥–∞—é—Ç –æ—Å–Ω–æ–≤–∞–Ω–∏—è —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ –∞–∫—Ç–∏–≤ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –ø—É—Ç–∏ –∫ —É—Å–ø–µ—à–Ω–æ–º—É –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏—é –∫–ª—é—á–µ–≤—ã—Ö —É—Ä–æ–≤–Ω–µ–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ $110,000. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∑–∞–º–µ—á–∞—é—Ç, —á—Ç–æ –≤—Ä–µ–º—è –¥–ª—è –µ—â–µ –æ–¥–Ω–æ–≥–æ –ø–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫–æ–≥–æ —Ä–æ—Å—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ, —á—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏ –∫ –æ–±—â–µ–º—É –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–º—É –Ω–∞—Å—Ç—Ä–æ—é.</p>
                        <p class="font-bold text-lg mt-4 mb-2">–í–õ–ò–Ø–ù–ò–ï: –ü–æ–∑–∏—Ç–∏–≤–Ω–æ–µ</p>
                        <p class="font-bold text-lg mt-4 mb-2">–û–¶–ï–ù–ö–ê –í–õ–ò–Ø–ù–ò–Ø: [üü©üü©üü©üü©üü©üü©üü©‚¨ú‚¨ú‚¨ú] 7/10</p>
                        <p class="font-bold text-lg mt-4 mb-2">–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–æ–≤–æ—Å—Ç–µ–π, –ø—Ä–æ—à–µ–¥—à–∏—Ö –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É:</p>
                        <ul class="list-disc list-inside text-sm">
                            <li><a href="https://www.coindesk.com/markets/2025/07/02/bitcoin-bulls-should-be-wary-as-dollar-index-chart-flashes-death-cross-technical-analysis" target="_blank" class="text-blue-400 hover:underline">https://www.coindesk.com/markets/2025/07/02/bitcoin-bulls-should-be-wary-as-dollar-index-chart-flashes-death-cross-technical-analysis</a></li>
                            <li><a href="https://cointelegraph.com/news/bitcoin-cup-and-handle-breakout-230k-target-sol-2800-gain" target="_blank" class="text-blue-400 hover:underline">https://cointelegraph.com/news/bitcoin-cup-and-handle-breakout-230k-target-sol-2800-gain</a></li>
                            <li><a href="https://cointelegraph.com/news/bitcoin-test-110k-macro-analysis-tells-traders-buckle-up" target="_blank" class="text-blue-400 hover:underline">https://cointelegraph.com/news/bitcoin-test-110k-macro-analysis-tells-traders-buckle-up</a></li>
                        </ul>
                    </div>
                </div>

                <div class="collapsible-section">
                    <div class="collapsible-header" onclick="toggleCollapsible(this, 'aboutProjectContent')">
                        <span>–û –ü–†–û–ï–ö–¢–ï CRYPTOVISIONAI</span>
                        <span class="arrow-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" id="aboutProjectContent">
                        <p class="font-bold text-lg mb-2">–ö–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è: 2366.24 –º–ª—Ä–¥ USD (1 –º–µ—Å—Ç–æ)</p>
                        <p>–û–±—ä–µ–º (24–ß): 23.07 –º–ª—Ä–¥ USD</p>
                        <p>–õ–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å: 1.0%</p>
                        <p>FDV: 2366.24 –º–ª—Ä–¥ USD</p>
                        <p class="font-bold text-lg mt-4 mb-2">ATH: $119126.0000</p>
                        <p>ATL: $67.8100</p>
                        <p class="font-bold text-lg mt-4 mb-2">–û–±—â–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: 19.89 –º–ª–Ω –º–æ–Ω–µ—Ç</p>
                        <p>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: 21.00 –º–ª–Ω –º–æ–Ω–µ—Ç</p>
                        <p class="font-bold text-lg mt-4 mb-2">–£—Ä–æ–≤–µ–Ω—å –±–ª–æ–∫—á–µ–π–Ω–∞: Layer 1 (L1)</p>
                        <p>–ö–∞—Ç–µ–≥–æ—Ä–∏—è: Optimism Ecosystem</p>
                        <p class="font-bold text-lg mt-4 mb-2">–î–∞—Ç–∞ –∑–∞–ø—É—Å–∫–∞: 2009-01-03</p>
                        <p class="font-bold text-lg mt-4 mb-2">–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞: [üü©üü©üü©üü©üü©üü©üü©üü©‚¨ú‚¨ú] 86%</p>
                        <p class="font-bold text-lg mt-4 mb-2">–°–∞–π—Ç: <a href="http://www.bitcoin.org" target="_blank" class="text-blue-400 hover:underline">http://www.bitcoin.org</a></p>
                        <p class="font-bold text-lg mt-4 mb-2">Twitter: –û—Ç–∫—Ä—ã—Ç—å</p>
                        <p class="font-bold text-lg mt-4 mb-2">Reddit: –û—Ç–∫—Ä—ã—Ç—å</p>
                    </div>
                </div>

                <div class="analysis-section-card relative">
                    <h2>–î–µ—Ç–∞–ª—å–Ω—ã–π –ê–Ω–∞–ª–∏–∑ (–ü—Ä–µ–º–∏—É–º)</h2>
                    <ul class="detailed-analysis-list locked-content">
                        <li>
                            <span class="number">1</span>
                            <span class="text-content" id="detailedAnalysis1">–í–Ω—É—Ç—Ä–∏–¥–Ω–µ–≤–Ω–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å</span>
                            <span class="lock-icon">üîí</span>
                        </li>
                        <li>
                            <span class="number">2</span>
                            <span class="text-content" id="detailedAnalysis2">–í—Å–ø–ª–µ—Å–∫–∏ –æ–±—ä–µ–º–∞ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–≤</span>
                            <span class="lock-icon">üîí</span>
                        </li>
                        <li>
                            <span class="number">3</span>
                            <span class="text-content" id="detailedAnalysis3">–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤—Å–µ–æ–±—ä–µ–º–ª—é—â–µ–≥–æ —Ç—Ä–µ–Ω–¥–∞</span>
                            <span class="lock-icon">üîí</span>
                        </li>
                        <li>
                            <span class="number">4</span>
                            <span class="text-content" id="detailedAnalysis4">–î–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–≤–æ—Ä–æ—Ç–Ω—ã—Ö —Å–≤–µ—á–µ–π</span>
                            <span class="lock-icon">üîí</span>
                        </li>
                        <li>
                            <span class="number">5</span>
                            <span class="text-content" id="detailedAnalysis5">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ</span>
                            <span class="lock-icon">üîí</span>
                        </li>
                    </ul>
                    <div class="lock-overlay" id="detailedAnalysisLockOverlay">
                        <span class="text-2xl">–î–æ—Å—Ç—É–ø–Ω–æ –≤ –ü—Ä–µ–º–∏—É–º –ø–ª–∞–Ω–µ üîí</span>
                    </div>
                </div>
            </div>

            <div id="errorMessage" class="hidden bg-red-800 border border-red-600 text-red-200 px-4 py-3 rounded-md mt-4" role="alert">
                <strong class="font-bold">–û—à–∏–±–∫–∞!</strong>
                <span class="block sm:inline" id="errorText"></span>
            </div>
        </div>

        <div id="paymentPage" class="page">
            <h2 class="text-xl font-semibold text-center mb-4">–í–∞—à –ü–ª–∞–Ω –∏ –ü–æ–¥–ø–∏—Å–∫–∏</h2>
            <div class="payment-info card">
                <p class="text-lg font-bold mb-2">–¢–µ–∫—É—â–∏–π –ø–ª–∞–Ω: –ë–∞–∑–æ–≤—ã–π</p>
                <p class="mb-2">–û—Å—Ç–∞—Ç–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤: <span class="font-bold text-blue-400" id="currentTokens">50</span></p>
                <p class="mb-4">–ü–æ–¥–ø–∏—Å–∫–∞ –∫–æ–Ω—á–∞–µ—Ç—Å—è: <span class="font-bold text-blue-400" id="subscriptionEndDate">--.--.----</span></p>
                <p class="text-sm text-gray-400 mb-4">–í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è—é—Ç—Å—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–æ–π (TON). –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏—Å–ª–∏—Ç —Ç–æ–∫–µ–Ω—ã.</p>
            </div>

            <h2 class="text-xl font-semibold text-center mt-6 mb-4">–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é:</h2>

            <div class="subscription-options-container">
                <div class="card" id="payAsYouGoSection">
                    <h3 class="text-xl font-bold text-center mb-4">–ü–æ–∫—É–ø–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤</h3>
                    <label for="creditAmountSelect" class="block text-sm font-medium text-gray-400 mb-2">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                    <select id="creditAmountSelect" class="credit-select-box mb-4" onchange="updateCreditPrice()">
                        <option value="5">5 –∫—Ä–µ–¥–∏—Ç–æ–≤</option>
                        <option value="10">10 –∫—Ä–µ–¥–∏—Ç–æ–≤</option>
                        <option value="75">75 –∫—Ä–µ–¥–∏—Ç–æ–≤</option>
                        <option value="200">200 –∫—Ä–µ–¥–∏—Ç–æ–≤</option>
                        <option value="500">500 –∫—Ä–µ–¥–∏—Ç–æ–≤</option>
                        <option value="1200">1200 –∫—Ä–µ–¥–∏—Ç–æ–≤</option>
                        <option value="4000">4000 –∫—Ä–µ–¥–∏—Ç–æ–≤</option>
                        <option value="8000">8000 –∫—Ä–µ–¥–∏—Ç–æ–≤</option>
                    </select>
                    <p class="text-xl font-bold text-center mb-4"><span id="currentCreditPrice">$1.30</span></p>
                    <p class="text-sm text-gray-400 text-center mb-4">–ù—É–∂–Ω–æ –±–æ–ª—å—à–µ? –ü–æ–ø–æ–ª–Ω—è–π—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è, —Å–≤–µ—Ä—Ö –≤–∞—à–µ–≥–æ —Ç–µ–∫—É—â–µ–≥–æ –ø–ª–∞–Ω–∞.</p>
                    <button class="btn-primary w-full" onclick="purchaseCredits()">–ö—É–ø–∏—Ç—å —Ç–æ–∫–µ–Ω—ã</button>
                </div>

                <div class="card" id="subscriptionSection">
                    <div class="relative mb-4">
                        <h3 class="text-xl font-bold text-center m-0">–ü–æ–¥–ø–∏—Å–∫–∞</h3>
                        <div class="toggle-switch absolute top-0 right-0">
                            <div class="toggle-button active" id="monthlyToggle" onclick="toggleSubscriptionView('monthly')">–ú–µ—Å—è—á–Ω–∞—è</div>
                            <div class="toggle-button" id="yearlyToggle" onclick="toggleSubscriptionView('yearly')">–ì–æ–¥–æ–≤–∞—è</div>
                        </div>
                    </div>
                    <label for="planSelect" class="block text-sm font-medium text-gray-400 mb-2">–ü–ª–∞–Ω:</label>
                    <select id="planSelect" class="credit-select-box mb-4" onchange="updateSubscriptionPrice()">
                        <option value="starter_monthly">200 –∫—Ä–µ–¥–∏—Ç–æ–≤ - Starter Plan</option>
                        <option value="pro_monthly">650 –∫—Ä–µ–¥–∏—Ç–æ–≤ - Pro Plan</option>
                        <option value="vip_monthly">1500 –∫—Ä–µ–¥–∏—Ç–æ–≤ - VIP Plan</option>
                    </select>
                    <p class="text-sm text-gray-400 text-center mb-2">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–æ <span id="currentPlanCredits">200</span> –∫—Ä–µ–¥–∏—Ç–æ–≤ –≤ –º–µ—Å—è—Ü</p>
                    <p class="text-xl font-bold text-center mb-4"><span id="currentSubscriptionPrice">$18</span>/–º–µ—Å—è—Ü</p>
                    <button class="btn-primary w-full" onclick="upgradeSubscription()">–ö—É–ø–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</button>
                </div>
            </div>

            <div class="card">
                <h2 class="text-xl font-semibold text-center mb-4">–û –ü–†–û–ï–ö–¢–ï CRYPTOVISIONAI</h2>
                <p class="text-gray-300">
                    CryptoVisionAI ‚Äî —ç—Ç–æ –ø–µ—Ä–µ–¥–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –∏—Å–ø–æ–ª—å–∑—É—é—â–∞—è –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö —Ä—ã–Ω–∫–æ–≤. –ù–∞—à–∞ —Ü–µ–ª—å ‚Äî –¥–∞—Ç—å –≤–∞–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –∏–Ω—Å–∞–π—Ç—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π. –ú—ã –æ–±—ä–µ–¥–∏–Ω—è–µ–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∏ –Ω–æ–≤–æ—Å—Ç–Ω–æ–π –∞–Ω–∞–ª–∏–∑, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –≤–∞–º –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É —Ä—ã–Ω–∫–∞.
                </p>
            </div>
        </div>

        <div id="instructionModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-content-center p-4 hidden">
            <div class="bg-gray-800 rounded-lg p-6 max-w-sm w-full relative">
                <h2 class="text-xl font-bold text-white mb-4 text-center">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h2>
                <p class="text-gray-300 mb-4">
                    1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –≥—Ä–∞—Ñ–∏–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å.<br>
                    2. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑".<br>
                    3. AI –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –≤–∞–º –∫–ª—é—á–µ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã –∏ –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π.<br>
                    4. –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ü—Ä–µ–º–∏—É–º –∏–ª–∏ VIP –ø–ª–∞–Ω.
                </p>
                <button class="btn-primary w-full" onclick="hideInstructionModal()">–ü–æ–Ω—è—Ç–Ω–æ</button>
            </div>
        </div>

    </div>

    <div id="loadingModal" class="loading-modal">
        <div class="loading-modal-content">
            <div class="loading-spinner-modal"></div>
            <p class="loading-text">AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≥—Ä–∞—Ñ–∏–∫...</p>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" data-page="analysisPage" onclick="showPage('analysisPage'); activateNav(this)">
            <div class="nav-icon-circle">
                <span class="nav-icon">üìà</span>
            </div>
            <span>–ê–Ω–∞–ª–∏–∑</span>
        </div>
        <div class="nav-item" data-page="paymentPage" onclick="showPage('paymentPage'); activateNav(this)">
            <div class="nav-icon-circle">
                <span class="nav-icon">‚≠ê</span>
            </div>
            <span>–ü–æ–¥–ø–∏—Å–∫–∞</span>
        </div>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        const chartImageUpload = document.getElementById('chartImageUpload');
        const imageUploadArea = document.getElementById('imageUploadArea');
        const imagePreview = document.getElementById('imagePreview');
        const getAnalysisBtn = document.getElementById('getAnalysisBtn');
        const buttonText = document.getElementById('buttonText');
        const analysisResult = document.getElementById('analysisResult');
        const errorMessage = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');

        const outputAction = document.getElementById('outputAction');
        const outputEntryPrice = document.getElementById('outputEntryPrice');
        const outputTargetPrice = document.getElementById('outputTargetPrice');
        const outputStopLoss = document.getElementById('outputStopLoss');
        const outputTakeProfit = document.getElementById('outputTakeProfit');
        const outputTrend = document.getElementById('outputTrend');
        const outputVolatility = document.getElementById('outputVolatility');
        const outputVolume = document.getElementById('outputVolume');
        const outputSentiment = document.getElementById('outputSentiment');
        const outputGamePlan = document.getElementById('outputGamePlan');
        const detailedAnalysis1 = document.getElementById('detailedAnalysis1');
        const detailedAnalysis2 = document.getElementById('detailedAnalysis2');
        const detailedAnalysis3 = document.getElementById('detailedAnalysis3');
        const detailedAnalysis4 = document.getElementById('detailedAnalysis4');
        const detailedAnalysis5 = document.getElementById('detailedAnalysis5');
        const detailedAnalysisLockOverlay = document.getElementById('detailedAnalysisLockOverlay');

        const analysisPage = document.getElementById('analysisPage');
        const paymentPage = document.getElementById('paymentPage');
        const instructionModal = document.getElementById('instructionModal');
        const loadingModal = document.getElementById('loadingModal');

        const navItems = document.querySelectorAll('.nav-item');

        const tokenCounter = document.getElementById('tokenCounter');
        const currentTokens = document.getElementById('currentTokens');
        const subscriptionEndDate = document.getElementById('subscriptionEndDate');

        const monthlyToggle = document.getElementById('monthlyToggle');
        const yearlyToggle = document.getElementById('yearlyToggle');
        const payAsYouGoSection = document.getElementById('payAsYouGoSection');
        const subscriptionSection = document.getElementById('subscriptionSection');
        const creditAmountSelect = document.getElementById('creditAmountSelect');
        const currentCreditPrice = document.getElementById('currentCreditPrice');
        const planSelect = document.getElementById('planSelect');
        const currentPlanCredits = document.getElementById('currentPlanCredits');
        const currentSubscriptionPrice = document.getElementById('currentSubscriptionPrice');


        let uploadedImageBase64 = null;

        if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
            Telegram.WebApp.ready();
            Telegram.WebApp.expand();
        } else {
            console.warn('Telegram Web App API not available. Running in standalone mode. Real payments will not work.');
        }

        function showPage(pageId) {
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            window.scrollTo(0, 0);
        }

        function activateNav(element) {
            navItems.forEach(item => item.classList.remove('active'));
            element.classList.add('active');
        }

        function toggleCollapsible(headerElement, contentId) {
            const content = document.getElementById(contentId);
            headerElement.classList.toggle('active');
            content.classList.toggle('active');
        }

        function showInstructionModal() {
            instructionModal.classList.remove('hidden');
        }

        function hideInstructionModal() {
            instructionModal.classList.add('hidden');
        }

        function showLoadingModal() {
            loadingModal.classList.add('active');
        }

        function hideLoadingModal() {
            loadingModal.classList.remove('active');
        }

        imageUploadArea.addEventListener('click', () => {
            chartImageUpload.click();
        });

        chartImageUpload.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    imagePreview.src = e.target.result;
                    imagePreview.style.display = 'block';
                    uploadedImageBase64 = e.target.result.split(',')[1];
                };
                reader.readAsDataURL(file);
            } else {
                imagePreview.src = '#';
                imagePreview.style.display = 'none';
                uploadedImageBase64 = null;
            }
        });

        getAnalysisBtn.addEventListener('click', async () => {
            if (!uploadedImageBase64) {
                showErrorMessage('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.');
                return;
            }

            showLoadingModal();

            hideErrorMessage();
            hideAnalysisResult();

            try {
                await new Promise(resolve => setTimeout(resolve, 5000));

                const dummyAnalysisData = {
                    action: Math.random() < 0.5 ? '–ö–£–ü–ò–¢–¨' : '–ü–†–û–î–ê–¢–¨',
                    entryPrice: '777',
                    targetPrice: '777',
                    stopLoss: '777',
                    takeProfit: '777',
                    trend: '–ë—ã—á–∏–π',
                    volatility: '–°—Ä–µ–¥–Ω—è—è',
                    volume: '–í—ã—Å–æ–∫–∏–π',
                    sentiment: '–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ',
                    gamePlan: '–ë–∏—Ç–∫–æ–π–Ω –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è —Ç–æ—Ä–≥—É–µ—Ç—Å—è –æ–∫–æ–ª–æ $98,218 –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–∏–ª—å–Ω—ã–π –±—ã—á–∏–π –∏–º–ø—É–ª—å—Å —Å –≤—ã—Å–æ–∫–∏–º –æ–±—ä–µ–º–æ–º, —á—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ä–∞—Å—Ç—É—â–∏–π –∏–Ω—Ç–µ—Ä–µ—Å. –ú–æ–π —Ç–æ—Ä–≥–æ–≤—ã–π –ø–ª–∞–Ω —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ–±—ã –≤–æ–π—Ç–∏ –≤ –¥–ª–∏–Ω–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –æ–∫–æ–ª–æ $97,500, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–æ–ø-–ª–æ—Å—Å —á—É—Ç—å –Ω–∏–∂–µ –Ω–µ–¥–∞–≤–Ω–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ $95,000 –∏ —Å—Ç—Ä–µ–º–∏—Ç—å—Å—è –∫ —Ü–µ–ª–∏ –≤ $105,000, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–º —É—Ä–æ–≤–Ω—è–º —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è. (–¥–µ–º–æ)',
                    detailedAnalysis: [
                        '–í–Ω—É—Ç—Ä–∏–¥–Ω–µ–≤–Ω–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å',
                        '–í—Å–ø–ª–µ—Å–∫–∏ –æ–±—ä–µ–º–∞ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–≤',
                        '–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤—Å–µ–æ–±—ä–µ–º–ª—é—â–µ–≥–æ —Ç—Ä–µ–Ω–¥–∞',
                        '–î–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–≤–æ—Ä–æ—Ç–Ω—ã—Ö —Å–≤–µ—á–µ–π',
                        '–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ'
                    ],
                    planLevel: 'basic'
                };

                outputAction.textContent = dummyAnalysisData.action;
                outputEntryPrice.textContent = dummyAnalysisData.entryPrice;
                outputTargetPrice.textContent = dummyAnalysisData.targetPrice;
                outputStopLoss.textContent = dummyAnalysisData.stopLoss;
                outputTakeProfit.textContent = dummyAnalysisData.takeProfit;
                outputTrend.textContent = dummyAnalysisData.trend;
                outputVolatility.textContent = dummyAnalysisData.volatility;
                outputVolume.textContent = dummyAnalysisData.volume;
                outputSentiment.textContent = dummyAnalysisData.sentiment;
                outputGamePlan.textContent = dummyAnalysisData.gamePlan;
                detailedAnalysis1.textContent = dummyAnalysisData.detailedAnalysis[0];
                detailedAnalysis2.textContent = dummyAnalysisData.detailedAnalysis[1];
                detailedAnalysis3.textContent = dummyAnalysisData.detailedAnalysis[2];
                detailedAnalysis4.textContent = dummyAnalysisData.detailedAnalysis[3];
                detailedAnalysis5.textContent = dummyAnalysisData.detailedAnalysis[4];

                if (dummyAnalysisData.action === '–ö–£–ü–ò–¢–¨') {
                    outputAction.className = 'font-bold text-green-600';
                } else if (dummyAnalysisData.action === '–ü–†–û–î–ê–¢–¨') {
                    outputAction.className = 'font-bold text-red-600';
                } else {
                    outputAction.className = 'font-bold text-gray-400';
                }

                if (dummyAnalysisData.planLevel === 'basic') {
                    detailedAnalysisLockOverlay.classList.remove('hidden');
                } else {
                    detailedAnalysisLockOverlay.classList.add('hidden');
                }

                showAnalysisResult();

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∞–Ω–∞–ª–∏–∑–∞:', error);
                showErrorMessage('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∞–Ω–∞–ª–∏–∑–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–ª–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
            } finally {
                hideLoadingModal();
            }
        });

        function requestSubscriptionPayment(starsAmount, payloadType) {
            const invoicePayload = `${payloadType}_${starsAmount}`;

            if (Telegram.WebApp && Telegram.WebApp.requestPayment) {
                Telegram.WebApp.requestPayment({
                    amount: starsAmount,
                    asset: 'stars',
                    payload: invoicePayload
                }, (status) => {
                    if (status.status === 'succeeded') {
                        Telegram.WebApp.showAlert(`–ü–æ–∫—É–ø–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ–ø–ª–∞—á–µ–Ω–∞!`);
                    } else {
                        Telegram.WebApp.showAlert(`–û—à–∏–±–∫–∞ –æ–ø–ª–∞—Ç—ã –∏–ª–∏ –æ—Ç–º–µ–Ω–∞: ${status.status}`);
                    }
                });
            } else {
                console.warn(`Telegram Web App API not available. Cannot request payment for ${starsAmount / 100} Stars.`);
                Telegram.WebApp.showAlert(`–î–µ–º–æ: –ó–∞–ø—Ä–æ—Å –ø–ª–∞—Ç–µ–∂–∞ –Ω–∞ ${starsAmount / 100} Stars. –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–ª–∞—Ç–µ–∂–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Telegram Stars.`);
            }
        }

        const creditPrices = {
            '5': 1.30, '10': 2.50, '75': 15.00, '200': 30.00, '500': 60.00, '1200': 100.00, '4000': 250.00, '8000': 400.00
        };
        const monthlyPlanDetails = {
            'starter_monthly': { credits: 200, price: 18 },
            'pro_monthly': { credits: 650, price: 45 },
            'vip_monthly': { credits: 1500, price: 90 }
        };
        const yearlyPlanDetails = {
            'starter_yearly': { credits: 200, price: 18 * 12 * 0.7 },
            'pro_yearly': { credits: 650, price: 45 * 12 * 0.7 },
            'vip_yearly': { credits: 1500, price: 90 * 12 * 0.7 }
        };
        let currentSubscriptionType = 'monthly';

        function updateCreditPrice() {
            const selectedCredits = creditAmountSelect.value;
            const price = creditPrices[selectedCredits];
            currentCreditPrice.textContent = `$${price.toFixed(2)}`;
        }

        function updateSubscriptionPrice() {
            let selectedPlanValue = planSelect.value;
            let details;
            let displayedCredits;

            if (currentSubscriptionType === 'monthly') {
                if (!selectedPlanValue.includes('_monthly')) {
                    selectedPlanValue = 'starter_monthly';
                }
                planSelect.innerHTML = `
                    <option value="starter_monthly">200 –∫—Ä–µ–¥–∏—Ç–æ–≤ - Starter Plan</option>
                    <option value="pro_monthly">650 –∫—Ä–µ–¥–∏—Ç–æ–≤ - Pro Plan</option>
                    <option value="vip_monthly">1500 –∫—Ä–µ–¥–∏—Ç–æ–≤ - VIP Plan</option>
                `;
                planSelect.value = selectedPlanValue;
                details = monthlyPlanDetails[selectedPlanValue];
                displayedCredits = details ? details.credits : 0;
            } else {
                if (!selectedPlanValue.includes('_yearly')) {
                    selectedPlanValue = 'starter_yearly';
                }
                planSelect.innerHTML = `
                    <option value="starter_yearly">200 –∫—Ä–µ–¥–∏—Ç–æ–≤/–º–µ—Å. - Starter Plan</option>
                    <option value="pro_yearly">650 –∫—Ä–µ–¥–∏—Ç–æ–≤/–º–µ—Å. - Pro Plan</option>
                    <option value="vip_yearly">1500 –∫—Ä–µ–¥–∏—Ç–æ–≤/–º–µ—Å. - VIP Plan</option>
                `;
                planSelect.value = selectedPlanValue;
                details = yearlyPlanDetails[selectedPlanValue];
                displayedCredits = monthlyPlanDetails[selectedPlanValue.replace('_yearly', '_monthly')].credits;
            }

            if (!details) {
                planSelect.value = planSelect.options[0].value;
                selectedPlanValue = planSelect.value;
                if (currentSubscriptionType === 'monthly') {
                    details = monthlyPlanDetails[selectedPlanValue];
                } else {
                    details = yearlyPlanDetails[selectedPlanValue];
                }
                displayedCredits = monthlyPlanDetails[selectedPlanValue.replace('_yearly', '_monthly')].credits;
            }

            currentPlanCredits.textContent = displayedCredits;
            currentSubscriptionPrice.textContent = `$${details.price.toFixed(2)}/${currentSubscriptionType === 'monthly' ? '–º–µ—Å—è—Ü' : '–≥–æ–¥'}`;
        }

        function toggleSubscriptionView(type) {
            currentSubscriptionType = type;
            if (type === 'monthly') {
                monthlyToggle.classList.add('active');
                yearlyToggle.classList.remove('active');
            } else {
                monthlyToggle.classList.remove('active');
                yearlyToggle.classList.add('active');
            }
            updateSubscriptionPrice();
        }

        function purchaseCredits() {
            const selectedCredits = creditAmountSelect.value;
            const priceInUSD = creditPrices[selectedCredits];
            const starsAmount = Math.round(priceInUSD * 100);
            requestSubscriptionPayment(starsAmount, `purchase_credits_${selectedCredits}`);
        }

        function upgradeSubscription() {
            const selectedPlan = planSelect.value;
            let details;
            if (currentSubscriptionType === 'monthly') {
                details = monthlyPlanDetails[selectedPlan];
            } else {
                details = yearlyPlanDetails[selectedPlan];
            }
            const priceInUSD = details.price;
            const starsAmount = Math.round(priceInUSD * 100);
            requestSubscriptionPayment(starsAmount, `upgrade_plan_${selectedPlan}`);
        }


        function showLoading(isLoading) {
            if (isLoading) {
                buttonText.textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
                getAnalysisBtn.disabled = true;
            } else {
                buttonText.textContent = '–ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑';
                getAnalysisBtn.disabled = false;
            }
        }

        function showAnalysisResult() {
            analysisResult.classList.remove('hidden');
        }

        function hideAnalysisResult() {
            analysisResult.classList.add('hidden');
        }

        function showErrorMessage(message) {
            errorText.textContent = message;
            errorMessage.classList.remove('hidden');
        }

        function hideErrorMessage() {
            errorMessage.classList.add('hidden');
        }

        document.addEventListener('DOMContentLoaded', () => {
            currentTokens.textContent = '50';
            subscriptionEndDate.textContent = '15.08.2025';
            updateCreditPrice();
            updateSubscriptionPrice();
            toggleSubscriptionView('monthly');
        });
    </script>
</body>
</html>
